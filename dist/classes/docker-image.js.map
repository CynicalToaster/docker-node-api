{"version":3,"sources":["../../src/classes/docker-image.js"],"names":["DockerImage","name","context","__dirname","dockerFile","$dockerApi","buildImage","src","dockerfile","t","stream","Promise","resolve","reject","_docker","modem","followProgress","err","res","console","log"],"mappings":";;;;;;;;;;;;;;;;;IAAqBA,W;;;AACnB,yBAIQ;AAAA,mFAAJ,EAAI;AAAA,QAHNC,IAGM,QAHNA,IAGM;AAAA,4BAFNC,OAEM;AAAA,QAFNA,OAEM,6BAFIC,SAEJ;AAAA,+BADNC,UACM;AAAA,QADNA,UACM,gCADO,YACP;;AAAA;AACN,SAAKH,IAAL,GAAkBA,IAAlB;AACA,SAAKC,OAAL,GAAkBA,OAAlB;AACA,SAAKE,UAAL,GAAkBA,UAAlB;AACD;;;;;;;;;;;;;;uBAGsBC,UAAU,CAACC,UAAX,CACnB;AACEJ,kBAAAA,OAAO,EAAE,KAAKA,OADhB;AAEEK,kBAAAA,GAAG,EAAE,CAAC,GAAD;AAFP,iBADmB,EAKnB;AACEC,kBAAAA,UAAU,EAAE,KAAKJ,UADnB;AAEEK,kBAAAA,CAAC,EAAE,KAAKR;AAFV,iBALmB,C;;;AAAfS,gBAAAA,M;;uBAWA,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACrCR,kBAAAA,UAAU,CAACS,OAAX,CAAmBC,KAAnB,CAAyBC,cAAzB,CACEN,MADF,EAEE,UAACO,GAAD,EAAMC,GAAN,EAAc;AACZC,oBAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,EAAiBD,GAAjB;AAEA,2BAAOA,GAAG,GAAGJ,MAAM,CAACI,GAAD,CAAT,GAAiBL,OAAO,CAACM,GAAD,CAAlC;AACD,mBANH;AAQD,iBATK,C;;;AAWNC,gBAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ","sourcesContent":["export default class DockerImage {\n  constructor({\n    name,\n    context = __dirname,\n    dockerFile = 'Dockerfile',\n  } = {}) {\n    this.name       = name;\n    this.context    = context;\n    this.dockerFile = dockerFile;\n  }\n\n  async build() {\n    const stream = await $dockerApi.buildImage(\n      {\n        context: this.context,\n        src: ['.'],\n      },\n      {\n        dockerfile: this.dockerFile,\n        t: this.name,\n      },\n    );\n\n    await new Promise((resolve, reject) => {\n      $dockerApi._docker.modem.followProgress(\n        stream,\n        (err, res) => {\n          console.log(res, err);\n\n          return err ? reject(err) : resolve(res);\n        },\n      );\n    });\n\n    console.log('Finished build');\n  }\n}\n"],"file":"docker-image.js"}